<!DOCTYPE html>
<html lang="es" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Portafolio profesional de Christian Mora, Desarrollador Frontend y Diseñador UI/UX">
    <title>Christian Mora - Portafolio Personal</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- WebGazer.js para seguimiento ocular -->
    <script src="https://webgazer.cs.brown.edu/webgazer.js"></script>
    <!-- Heatmap.js para visualización del mapa de calor -->
    <script src="https://cdn.jsdelivr.net/npm/heatmap.js@2.0.5/build/heatmap.min.js"></script>
    <!-- Estilos CSS para el seguimiento ocular -->
    <style>
        /* Estilos para el botón de control */
        #eyeTrackingControls {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        #toggleTracking {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        
        #toggleTracking:hover {
            background-color: #45a049;
        }
        
        #toggleTracking.stop {
            background-color: #f44336;
        }
        
        #toggleTracking.stop:hover {
            background-color: #da190b;
        }
        
        /* Contenedor para el mapa de calor */
        #heatmapContainer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
            display: none;
        }
        
        /* Indicador de calibración */
        #calibrationDot {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: red;
            border-radius: 50%;
            z-index: 10001;
            display: none;
        }
        
        /* Mensaje de estado */
        #statusMessage {
            margin-top: 10px;
            font-size: 14px;
            color: #333;
        }
        
        /* Botón para limpiar el mapa de calor */
        #clearHeatmap {
            background-color: #ff9800;
            color: white;
            border: none;
            padding: 8px 16px;
            text-align: center;
            text-decoration: none;
            display: none;
            font-size: 14px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        
        #clearHeatmap:hover {
            background-color: #e68900;
        }
    </style>
</head>
<body>
    <!-- Panel de control del seguimiento ocular -->
    <div id="eyeTrackingControls">
        <button id="toggleTracking">Iniciar Seguimiento Ocular</button>
        <button id="clearHeatmap">Limpiar Mapa de Calor</button>
        <div id="statusMessage">Listo para iniciar</div>
    </div>
    
    <!-- Contenedor para el mapa de calor -->
    <div id="heatmapContainer"></div>
    
    <!-- Punto de calibración -->
    <div id="calibrationDot"></div>

    <a class="skip-link" href="#main-content">Saltar al contenido principal</a>
    
    <header class="header">
        <div class="container">
            <a href="#" class="logo" aria-label="Inicio - Christian Mora">Christian Mora</a>
            <nav class="nav" aria-label="Navegación principal">
                <ul class="nav-list">
                    <li><a href="#about" class="nav-link">Sobre mí</a></li>
                    <li><a href="#skills" class="nav-link">Habilidades</a></li>
                    <li><a href="#projects" class="nav-link">Proyectos</a></li>
                    <li><a href="#contact" class="nav-link">Contacto</a></li>
                </ul>
                <button class="menu-toggle" aria-label="Menú" aria-expanded="false" aria-controls="nav-list">
                    <span class="menu-icon" aria-hidden="true">
                        <span class="menu-line"></span>
                        <span class="menu-line"></span>
                        <span class="menu-line"></span>
                    </span>
                    <span class="sr-only">Menú</span>
                </button>
            </nav>
        </div>
    </header>

    <main id="main-content">
        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <h1>Hola, soy <span class="highlight">Christian Mora</span></h1>
                    <p class="subtitle">Desarrollador Frontend y Diseñador UI/UX</p>
                    <p class="hero-description">Sé Creativo, Sé Impresionante!!</p>
                    <a href="#contact" class="btn btn-primary">Contáctame</a>
                </div>
                <div class="hero-image">
                    <img src="images/foto-perfil.png" alt="Christian Mora" class="profile-photo" width="400" height="400">
                </div>
            </div>
        </section>

        <section id="about" class="about" aria-labelledby="about-heading">
            <div class="container">
                <h2 id="about-heading" class="section-title">Sobre mí</h2>
                <p class="section-description"></p>
                <div class="about-content">
                    <div class="about-text">
                        <p>Desarrollador de Software Senior con experiencia liderando proyectos complejos, diseñando soluciones escalables y escribiendo código limpio y eficiente. Apasionado por la tecnología, el aprendizaje continuo y el trabajo en equipo. Me especializo en HTML, CSS, JavaScript y frameworks modernos como React.</p>
                        <p>Mi enfoque combina habilidades técnicas con un ojo para el diseño, lo que me permite crear experiencias digitales que no solo funcionan bien, sino que también son visualmente atractivas.</p>
                        <div class="about-links">
                            <a href="docs/CVCM.pdf" target="_blank" class="btn btn-outline" download="CV-Christian-Mora">Descargar CV (PDF, 67KB)</a>
                            <div class="social-links" aria-label="Redes sociales">
                                <a href="https://www.linkedin.com/in/christian-mora-abb02a73/" target="_blank" rel="noopener noreferrer" aria-label="Perfil de LinkedIn">
                                    <i class="fab fa-linkedin" aria-hidden="true"></i>
                                    <span class="sr-only">LinkedIn</span>
                                </a>
                                <a href="https://github.com/ChristianMora593/" target="_blank" rel="noopener noreferrer" aria-label="Perfil de GitHub">
                                    <i class="fab fa-github" aria-hidden="true"></i>
                                    <span class="sr-only">GitHub</span>
                                </a>
                                <a href="https://twitter.com/christianmora" target="_blank" rel="noopener noreferrer" aria-label="Perfil de Twitter">
                                    <i class="fab fa-twitter" aria-hidden="true"></i>
                                    <span class="sr-only">Twitter</span>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="about-image">
                        <img src="images/sobre-mi-foto.png" 
                            width="500" 
                            height="500"
                            class="profile-photo">
                    </div>
                </div>
            </div>
        </section>

        <section id="skills" class="skills" aria-labelledby="skills-heading">
            <div class="container">
                <h2 id="skills-heading" class="section-title">Habilidades</h2>
                <p class="section-description"></p>                                
                <div class="skills-grid">
                    <div class="skill-card" tabindex="0" role="article" aria-labelledby="skill1-title">
                        <div class="skill-icon" aria-hidden="true">
                            <i class="fab fa-html5"></i>
                        </div>
                        <h3 id="skill1-title">HTML5 Accesible</h3>
                        <p>Maquetación semántica que cumple con WCAG 2.1 AA</p>
                        <div class="skill-level" aria-label="Nivel de dominio: 90%">
                            <div class="level-bar" style="width: 90%"></div>
                        </div>
                    </div>
                    
                    <div class="skill-card" tabindex="0" role="article" aria-labelledby="skill2-title">
                        <div class="skill-icon" aria-hidden="true">
                            <i class="fab fa-css3-alt"></i>
                        </div>
                        <h3 id="skill2-title">CSS3 Moderno</h3>
                        <p>Estilos responsive y animaciones accesibles</p>
                        <div class="skill-level" aria-label="Nivel de dominio: 85%">
                            <div class="level-bar" style="width: 85%"></div>
                        </div>
                    </div>
                    
                    <div class="skill-card" tabindex="0" role="article" aria-labelledby="skill3-title">
                        <div class="skill-icon" aria-hidden="true">
                            <i class="fab fa-js"></i>
                        </div>
                        <h3 id="skill3-title">JavaScript</h3>
                        <p>Interactividad inclusiva y lógica de aplicación</p>
                        <div class="skill-level" aria-label="Nivel de dominio: 80%">
                            <div class="level-bar" style="width: 80%"></div>
                        </div>
                    </div>
                    
                    <div class="skill-card" tabindex="0" role="article" aria-labelledby="skill4-title">
                        <div class="skill-icon" aria-hidden="true">
                            <i class="fab fa-react"></i>
                        </div>
                        <h3 id="skill4-title">React</h3>
                        <p>Desarrollo de SPA accesibles</p>
                        <div class="skill-level" aria-label="Nivel de dominio: 75%">
                            <div class="level-bar" style="width: 75%"></div>
                        </div>
                    </div>
                    
                    <div class="skill-card" tabindex="0" role="article" aria-labelledby="skill5-title">
                        <div class="skill-icon" aria-hidden="true">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <h3 id="skill5-title">Diseño Responsivo</h3>
                        <p>Adaptación a todos los dispositivos</p>
                        <div class="skill-level" aria-label="Nivel de dominio: 95%">
                            <div class="level-bar" style="width: 95%"></div>
                        </div>
                    </div>
                    
                    <div class="skill-card" tabindex="0" role="article" aria-labelledby="skill6-title">
                        <div class="skill-icon" aria-hidden="true">
                            <i class="fas fa-universal-access"></i>
                        </div>
                        <h3 id="skill6-title">Accesibilidad Web</h3>
                        <p>WCAG 2.1, ARIA, Semántica</p>
                        <div class="skill-level" aria-label="Nivel de dominio: 85%">
                            <div class="level-bar" style="width: 85%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="projects" class="projects" aria-labelledby="projects-heading">
            <div class="container">
                <h2 id="projects-heading" class="section-title">Mis Proyectos</h2>
                <p class="section-description"></p>
                
                <div class="projects-grid">
                    <article class="project-card" tabindex="0" aria-labelledby="project1-title">
                        <div class="project-image-container">
                            <img src="images/proyecto1.png" 
                                alt="Captura del proyecto E-commerce accesible mostrando la página de productos" 
                                class="project-image"
                                width="600"
                                height="400">
                            <div class="project-overlay" aria-hidden="true"></div>
                        </div>
                        <div class="project-info">
                            <h3 id="project1-title">E-commerce Accesible</h3>
                            <p>Plataforma de compras con navegación por teclado, alto contraste y estructura semántica.</p>
                            <ul class="project-tech-list" aria-label="Tecnologías utilizadas">
                                <li>React</li>
                                <li>Node.js</li>
                                <li>WCAG 2.1 AA</li>
                            </ul>
                            <div class="project-links">
                                <a href="#" class="btn btn-small btn-outline" aria-label="Ver demo del proyecto E-commerce Accesible">Ver Demo</a>
                                <a href="#" class="btn btn-small btn-outline" aria-label="Ver código del proyecto E-commerce Accesible">Código</a>
                            </div>
                        </div>
                    </article>

                    <article class="project-card" tabindex="0" aria-labelledby="project2-title">
                        <div class="project-image-container">
                            <img src="images/proyecto2.png" 
                                alt="Interfaz de la aplicación de gestión de tareas accesible" 
                                class="project-image"
                                width="600"
                                height="400">
                            <div class="project-overlay" aria-hidden="true"></div>
                        </div>
                        <div class="project-info">
                            <h3 id="project2-title">Gestor de Tareas Inclusivo</h3>
                            <p>Aplicación para gestión de tareas con soporte para lectores de pantalla y navegación por voz.</p>
                            <ul class="project-tech-list" aria-label="Tecnologías utilizadas">
                                <li>Vue.js</li>
                                <li>Firebase</li>
                                <li>ARIA</li>
                            </ul>
                            <div class="project-links">
                                <a href="#" class="btn btn-small btn-outline" aria-label="Ver demo del Gestor de Tareas Inclusivo">Ver Demo</a>
                                <a href="#" class="btn btn-small btn-outline" aria-label="Ver código del Gestor de Tareas Inclusivo">Código</a>
                            </div>
                        </div>
                    </article>

                    <article class="project-card" tabindex="0" aria-labelledby="project3-title">
                        <div class="project-image-container">
                            <img src="images/proyecto3.png" 
                                alt="Landing page accesible mostrando diferentes secciones" 
                                class="project-image"
                                width="600"
                                height="400">
                            <div class="project-overlay" aria-hidden="true"></div>
                        </div>
                        <div class="project-info">
                            <h3 id="project3-title">Landing Page Accesible</h3>
                            <p>Página de aterrizaje optimizada para SEO y accesibilidad, con modo alto contraste.</p>
                            <ul class="project-tech-list" aria-label="Tecnologías utilizadas">
                                <li>HTML5</li>
                                <li>CSS3</li>
                                <li>JavaScript</li>
                            </ul>
                            <div class="project-links">
                                <a href="#" class="btn btn-small btn-outline" aria-label="Ver demo de la Landing Page Accesible">Ver Demo</a>
                                <a href="#" class="btn btn-small btn-outline" aria-label="Ver código de la Landing Page Accesible">Código</a>
                            </div>
                        </div>
                    </article>
                </div>
            </div>
        </section>

        <section id="contact" class="contact" aria-labelledby="contact-heading">
            <div class="container">
                <h2 id="contact-heading" class="section-title">Contáctame</h2>
                <p class="section-description"></p>
                <p class="section-description">Completa el formulario o utiliza la información directa para ponerse en contacto conmigo</p>
                
                <div class="contact-content">
                    <form class="contact-form" aria-labelledby="contact-form-heading">
                        <h3 id="contact-form-heading" class="sr-only">Formulario de contacto</h3>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="name">Nombre completo <span class="required">*</span></label>
                                <input type="text" id="name" name="name" required autocomplete="name" aria-required="true">
                            </div>
                            
                            <div class="form-group">
                                <label for="email">Email <span class="required">*</span></label>
                                <input type="email" id="email" name="email" required autocomplete="email" aria-required="true">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="subject">Asunto <span class="required">*</span></label>
                            <input type="text" id="subject" name="subject" required aria-required="true">
                        </div>
                        
                        <div class="form-group">
                            <label for="message">Mensaje <span class="required">*</span></label>
                            <textarea id="message" name="message" rows="6" required aria-required="true"></textarea>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Enviar mensaje</button>
                            <p class="form-note">Los campos marcados con <span class="required">*</span> son obligatorios</p>
                        </div>
                    </form>
                    
                    <div class="contact-info">
                        <h3>Información de contacto</h3>
                        <ul class="info-list">
                            <li class="info-item">
                                <i class="fas fa-envelope" aria-hidden="true"></i>
                                <div>
                                    <span class="info-label">Correo:</span>
                                    <a href="mailto:christian@christianmora.com">christian@christianmora.com</a>
                                </div>
                            </li>
                            <li class="info-item">
                                <i class="fas fa-phone" aria-hidden="true"></i>
                                <div>
                                    <span class="info-label">Teléfono:</span>
                                    <a href="tel:+593 995 685 389">+593 995 685 389</a>
                                </div>
                            </li>
                            <li class="info-item">
                                <i class="fas fa-map-marker-alt" aria-hidden="true"></i>
                                <div>
                                    <span class="info-label">Ubicación:</span>
                                    <span>Quito, Ecuador</span>
                                </div>
                            </li>
                            <li class="info-item">
                                <i class="fas fa-clock" aria-hidden="true"></i>
                                <div>
                                    <span class="info-label">Horario:</span>
                                    <span>Lun-Vie: 9:00 - 18:00</span>
                                </div>
                            </li>
                        </ul>
                        
                        <div class="social-links" aria-label="Redes sociales">
                            <a href="#" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn (se abre en nueva ventana)">
                                <i class="fab fa-linkedin" aria-hidden="true"></i>
                            </a>
                            <a href="#" target="_blank" rel="noopener noreferrer" aria-label="GitHub (se abre en nueva ventana)">
                                <i class="fab fa-github" aria-hidden="true"></i>
                            </a>
                            <a href="#" target="_blank" rel="noopener noreferrer" aria-label="Twitter (se abre en nueva ventana)">
                                <i class="fab fa-twitter" aria-hidden="true"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer" role="contentinfo">
        <div class="container">
            <p>&copy; <span id="current-year"></span> Bears Technology. Todos los derechos reservados.</p>
            <p>Sitio web diseñado con accesibilidad como prioridad.</p>
            <a href="#" class="back-to-top" aria-label="Volver al inicio">
                <i class="fas fa-arrow-up" aria-hidden="true"></i>
            </a>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        // Variables globales
        let isTracking = false;
        let heatmapInstance = null;
        let gazeData = [];
        let calibrationPoints = [];
        
        // Configuración inicial de WebGazer
        window.addEventListener('load', function() {
            // Configurar WebGazer
            webgazer.params.showVideoPreview = true;
            webgazer.params.showPredictionPoints = true;
            
            // Preparar el mapa de calor
            setupHeatmap();
            
            // Configurar botones
            setupButtons();
        });
        
        // Función para configurar el mapa de calor
        function setupHeatmap() {
            heatmapInstance = h337.create({
                container: document.getElementById('heatmapContainer'),
                radius: 40,
                maxOpacity: 0.6,
                minOpacity: 0,
                blur: 0.75
            });
        }
        
        // Función para configurar los botones
        function setupButtons() {
            const toggleButton = document.getElementById('toggleTracking');
            const clearButton = document.getElementById('clearHeatmap');
            const statusMessage = document.getElementById('statusMessage');
            
            toggleButton.addEventListener('click', function() {
                if (!isTracking) {
                    startTracking();
                } else {
                    stopTracking();
                }
            });
            
            clearButton.addEventListener('click', function() {
                clearHeatmap();
            });
        }
        
        // Función para iniciar el seguimiento
        function startTracking() {
            const toggleButton = document.getElementById('toggleTracking');
            const statusMessage = document.getElementById('statusMessage');
            
            statusMessage.textContent = 'Iniciando cámara y calibración...';
            toggleButton.disabled = true;
            
            // Iniciar WebGazer
            webgazer.setGazeListener(function(data, elapsedTime) {
                if (data == null) return;
                
                // Guardar datos de la mirada
                gazeData.push({
                    x: data.x,
                    y: data.y,
                    value: 1
                });
                
                // Actualizar el mapa de calor en tiempo real (opcional)
                if (gazeData.length % 10 === 0) {
                    updateHeatmap();
                }
            }).begin();
            
            // Configurar estado
            isTracking = true;
            toggleButton.textContent = 'Detener Seguimiento';
            toggleButton.className = 'stop';
            toggleButton.disabled = false;
            statusMessage.textContent = 'Seguimiento activo. Mira la pantalla normalmente.';
            
            // Ocultar el video de preview después de la calibración
            setTimeout(() => {
                webgazer.showPredictionPoints(false);
                webgazer.showVideoPreview(false);
            }, 5000);
        }
        
        // Función para detener el seguimiento
        function stopTracking() {
            const toggleButton = document.getElementById('toggleTracking');
            const statusMessage = document.getElementById('statusMessage');
            const clearButton = document.getElementById('clearHeatmap');
            
            // Detener WebGazer
            webgazer.pause();
            webgazer.showPredictionPoints(false);
            webgazer.showVideoPreview(false);
            
            // Mostrar el mapa de calor final
            showFinalHeatmap();
            
            // Actualizar estado
            isTracking = false;
            toggleButton.textContent = 'Iniciar Seguimiento Ocular';
            toggleButton.className = '';
            statusMessage.textContent = 'Seguimiento detenido. Mapa de calor visible.';
            clearButton.style.display = 'inline-block';
        }
        
        // Función para actualizar el mapa de calor
        function updateHeatmap() {
            if (gazeData.length > 0) {
                heatmapInstance.setData({
                    max: 20,
                    data: gazeData
                });
            }
        }
        
        // Función para mostrar el mapa de calor final
        function showFinalHeatmap() {
            const heatmapContainer = document.getElementById('heatmapContainer');
            heatmapContainer.style.display = 'block';
            
            // Actualizar con todos los datos recolectados
            updateHeatmap();
        }
        
        // Función para limpiar el mapa de calor
        function clearHeatmap() {
            const heatmapContainer = document.getElementById('heatmapContainer');
            const clearButton = document.getElementById('clearHeatmap');
            const statusMessage = document.getElementById('statusMessage');
            
            // Limpiar datos
            gazeData = [];
            heatmapInstance.setData({ max: 0, data: [] });
            
            // Ocultar elementos
            heatmapContainer.style.display = 'none';
            clearButton.style.display = 'none';
            statusMessage.textContent = 'Mapa de calor limpiado. Listo para nueva sesión.';
        }
        
        // Función de calibración mejorada
        function improveCalibration() {
            // Puntos de calibración en la pantalla
            const calibrationPositions = [
                {x: 10, y: 10},
                {x: window.innerWidth - 10, y: 10},
                {x: window.innerWidth / 2, y: window.innerHeight / 2},
                {x: 10, y: window.innerHeight - 10},
                {x: window.innerWidth - 10, y: window.innerHeight - 10}
            ];
            
            // Aquí podrías implementar una rutina de calibración más elaborada
            // Por ahora, WebGazer se calibra automáticamente con los clics del usuario
        }
    </script>
</body>
</html>